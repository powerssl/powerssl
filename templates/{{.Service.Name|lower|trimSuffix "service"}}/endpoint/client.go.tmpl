// Code generated by protoc-gen-gotemplate. DO NOT EDIT.
{{$resourceName := .Service.Name | trimSuffix "Service"}}
{{- $resourceNamePlural := concat $resourceName "s" }}
{{- if (regexMatch "y$" $resourceName)}}
{{- $resourceNamePlural = concat ($resourceName | trimSuffix "y") "ies" }}
{{- end}}
package endpoint // import "powerssl.io/pkg/resource/gen/{{$resourceName | lower}}/endpoint"

import (
	"context"

	"powerssl.io/pkg/api"
)

{{range .Service.Method}}

{{if eq (.Name | concat) "Create"}}
func (e Endpoints) Create(ctx context.Context, {{$resourceName | lowerCamelCase}} *api.{{$resourceName}}) (*api.{{$resourceName}}, error) {
	resp, err := e.{{.Name}}Endpoint(ctx, {{.Name}}Request{
		{{$resourceName}}: {{$resourceName | lowerCamelCase}},
	})
	if err != nil {
		return nil, err
	}
	response := resp.(CreateResponse)
	return response.{{$resourceName}}, nil
}
{{- else if eq (.Name | concat) "Delete"}}
func (e Endpoints) Delete(ctx context.Context, name string) error {
	_, err := e.DeleteEndpoint(ctx, DeleteRequest{
		Name: name,
	})
	if err != nil {
		return err
	}
	return nil
}
{{- else if eq (.Name | concat) "Get"}}
func (e Endpoints) Get(ctx context.Context, name string) (*api.{{$resourceName}}, error) {
	resp, err := e.GetEndpoint(ctx, GetRequest{
		Name: name,
	})
	if err != nil {
		return nil, err
	}
	response := resp.(GetResponse)
	return response.{{$resourceName}}, nil
}
{{- else if eq (.Name | concat) "List"}}
func (e Endpoints) List(ctx context.Context) ([]*api.{{$resourceName}}, error) {
	resp, err := e.ListEndpoint(ctx, ListRequest{
	})
	if err != nil {
		return nil, err
	}
	response := resp.(ListResponse)
	return response.{{$resourceNamePlural}}, nil
}
{{- else if eq (.Name | concat) "Update"}}
func (e Endpoints) Update(ctx context.Context, {{$resourceName | lowerCamelCase}} *api.{{$resourceName}}) (*api.{{$resourceName}}, error) {
	resp, err := e.UpdateEndpoint(ctx, UpdateRequest{
		{{$resourceName}}: {{$resourceName | lowerCamelCase}},
	})
	if err != nil {
		return nil, err
	}
	response := resp.(UpdateResponse)
	return response.{{$resourceName}}, nil
}
{{- end}}
{{- end}}
